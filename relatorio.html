<!DOCTYPE html>

<html lang="pt-BR">
    <head>

        <meta charset="UTF-8">
        <title>Relatório Trabalho Redes II</title>

    </head>

    <header class="header">
        <h1>Relatório da comparação entre procotolos TCP e UDP</h1>
        <h2>Pedro Chapelin e Arthur Gropp</h2>
    </header>

    <body class="body">

        <section class="introduction">
            Para testar os protocolos da camada de transporte do modelo OSI e observar as diferenças entre eles,
            optamos por utilizar a linguagem de programação Python para implementar um sistema cliente-servidor
            para ambos, com as funções de API socket. Por meio das funções disponibilizadas, focamos em realizar
            uma transferência de arquivos do servidor para o cliente, com o objetivo de observar o tempo total
            da transferência e se todos os pacotes (<i>Chunks de 1024 bytes, ou 1KB</i>) foram efetivamente entregues. <br> <br>
            Sabemos que o <b>UDP</b> não realiza os mesmos tratamentos e cuidados que o <b>TCP</b>, relativos a 
            verificações de pacotes, retransmissão de dados perdidos ou timeouts. Por conta disso ao montarmos
            os códigos do cliente e servidor TCP e UDP, imaginamos que ao rodar com um arquivo de teste<i>(1GB
            de tamanho)</i> o UDP seria muito mais rápido que o TCP. <br><br>
            Eis aqui os códigos: <br><br>
        </section>

        <section class="codes">
            <a href="assets/Códigos/UDP/server_UDP.py.txt">Server UDP</a> | 
            <a href="assets/Códigos/UDP/client_UDP.py.txt">Client UDP</a> <br>
            <a href="assets/Códigos/TCP/server_TCP.py.txt">Server TCP</a> |
            <a href="assets/Códigos/TCP/client_TCP.py.txt">Client TCP</a> <br>
        </section>

        <section class="tests">

            <div class="test">
                <h2>1º Teste</h2>
                Para o primeiro teste realizamos a transferência com um arquivo de 1GB e também de outro arquivo menor: <br> <br>

                <a href="assets/Logs/UDP/logUDP1-1.txt">logUDP1-1.txt</a> |
                <a href="assets/Logs/UDP/logUDP1-2.txt">logUDP1-2.txt</a> <br>
                <a href="assets/Logs/TCP/logTCP1-1.txt">logTCP1-1.txt</a> |
                <a href="assets/Logs/TCP/logTCP1-2.txt">logTCP1-2.txt</a> <br> <br>

                Ao observar os logs de execução, conseguimos reparar que tanto o UDP quanto o TCP levaram praticamente
                o mesmo tempo para executar a transferência, entretanto com o UDP não foi possível entregar todos os 
                pacotes necessários. Mas como é possível levarem o mesmo tempo? Não era pro UDP ser mais rápido? <br> <br>
                Isso acontece porque estamos testando na <b>loopback</b>, que é um endereço que aponta pra própria
                máquina, simulando uma rede. Nessa simulação, podemos perceber que a rede é perfeita (e irreal), ou
                seja, não apresenta congestionamento, perda de pacotes, latência e outros aspectos que podem interferir
                em transferências de dados.
            </div>

            <div class="test">
                <h2>2º Teste</h2>
                Para o segundo teste, buscamos como simular fatores que estimulasse as transferências a sofrerem
                atrasos ou perdas no meio do caminho, para isso usamos o comando <b>iptables</b> no terminal 
                antes de executarmos os programas. <br> <br>

                <i>sudo iptables -A INPUT -m statistic --mode random --probability 0.1 -j DROP</i> <br> <br>

                A junção dos parâmetros acima indica que foi configurado uma perda aleatória de 10% dos pacotes de entrada. <br> <br>

                <a href="assets/Logs/UDP/logUDP2-1.txt">logUDP2-1.txt</a> |
                <a href="assets/Logs/UDP/logUDP2-2.txt">logUDP2-2.txt</a> <br>
                <a href="assets/Logs/TCP/logTCP2-1.txt">logTCP2-1.txt</a> |
                <a href="assets/Logs/TCP/logTCP2-2.txt">logTCP2-2.txt</a> <br> <br>

                Ao enviar o mesmo pacote de 1GB do primeiro teste, podemos observar uma diferença gritante entre o UDP e TCP 
                descrita nos logs acima. Agora por conta da perda de pacotes, conseguimos observar que o TCP demorou 
                absurdamente mais, isso se deve ao fato dele sempre garantir a entrega confiável e na mesma ordem da origem.
                Para que isso seja possível o TCP precisou fazer retransmissões e verificações, o que com certeza impactaram
                no tempo final da transmissão. Quanto ao UDP, percebemos que não mudou quase nada, pois como não garante nenhuma
                das propriedades descritas acima, não faz nenhuma verificação. <br> <br>
            </div>
        </section>
    </body>
</html>
